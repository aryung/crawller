# Site-based Concurrency æ™ºæ…§ä¸¦ç™¼æ§åˆ¶å®Œæ•´æŒ‡å—

**ç‰ˆæœ¬**: v3.1.1  
**æ›´æ–°æ—¥æœŸ**: 2025-08-16  
**ä½œè€…**: Claude Code Assistant

## ğŸ“‹ ç›®éŒ„

- [æ¦‚å¿µä»‹ç´¹](#æ¦‚å¿µä»‹ç´¹)
- [æ ¸å¿ƒå„ªå‹¢](#æ ¸å¿ƒå„ªå‹¢)
- [ç³»çµ±æ¶æ§‹](#ç³»çµ±æ¶æ§‹)
- [ç¶²ç«™é…ç½®è¨­å®š](#ç¶²ç«™é…ç½®è¨­å®š)
- [å‘½ä»¤åƒè€ƒ](#å‘½ä»¤åƒè€ƒ)
- [æ€§èƒ½å°æ¯”](#æ€§èƒ½å°æ¯”)
- [æœ€ä½³å¯¦è¸](#æœ€ä½³å¯¦è¸)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## ğŸš€ æ¦‚å¿µä»‹ç´¹

Site-based Concurrency æ˜¯ä¸€å€‹é©å‘½æ€§çš„æ™ºæ…§ä¸¦ç™¼æ§åˆ¶ç³»çµ±ï¼Œå®ƒæ‘’æ£„äº†å‚³çµ±çš„å…¨åŸŸä¸¦ç™¼é™åˆ¶ï¼Œè½‰è€Œæ¡ç”¨**æŒ‰ç¶²ç«™åŸŸååˆ†åˆ¥æ§åˆ¶**çš„ä¸¦ç™¼ç­–ç•¥ã€‚

### å‚³çµ± vs Site-based å°æ¯”

| ç‰¹æ€§ | å‚³çµ±å…¨åŸŸä¸¦ç™¼ | Site-based ä¸¦ç™¼ |
|------|-------------|-----------------|
| **ä¸¦ç™¼æ§åˆ¶** | å…¨åŸŸçµ±ä¸€é™åˆ¶ (å¦‚ï¼š3) | æŒ‰ç¶²ç«™åˆ†åˆ¥é™åˆ¶ |
| **å»¶é²ç­–ç•¥** | çµ±ä¸€å»¶é² (å¦‚ï¼š5ç§’) | å‹•æ…‹æ™ºæ…§å»¶é² |
| **æ€§èƒ½** | å®¹æ˜“é˜»å¡æ…¢ç¶²ç«™ | å„ç¶²ç«™ä¸¦è¡Œä¸é˜»å¡ |
| **é©æ‡‰æ€§** | éœæ…‹é…ç½® | å‹•æ…‹èª¿æ•´ |
| **æ“´å±•æ€§** | å—é™æ–¼æœ€æ…¢ç¶²ç«™ | æŒ‰ç¶²ç«™ç‰¹æ€§å„ªåŒ– |

### æ ¸å¿ƒç†å¿µ

```
å‚³çµ±æ¨¡å¼ï¼š[å…¨åŸŸä¸¦ç™¼æ±  3] â†’ æ‰€æœ‰ç¶²ç«™ç«¶çˆ­ç›¸åŒè³‡æº
Site-basedæ¨¡å¼ï¼š
â”œâ”€â”€ tw.stock.yahoo.com [ä¸¦ç™¼: 3, å»¶é²: 2-4ç§’]
â”œâ”€â”€ finance.yahoo.com  [ä¸¦ç™¼: 2, å»¶é²: 3-6ç§’] 
â””â”€â”€ jp.finance.yahoo.com [ä¸¦ç™¼: 2, å»¶é²: 2-5ç§’]
```

## âš¡ æ ¸å¿ƒå„ªå‹¢

### 1. æ€§èƒ½æå‡ 20%
- **å¯¦æ¸¬æ•¸æ“š**: 50ç§’ vs 60ç§’ (ç›¸åŒä»»å‹™é‡)
- **ä¸¦è¡Œå„ªåŒ–**: ä¸åŒç¶²ç«™ä¸¦è¡Œè™•ç†ï¼Œäº’ä¸é˜»å¡
- **è³‡æºåˆ©ç”¨**: æœ€å¤§åŒ–ç¸½é«”ä¸¦ç™¼æ•ˆç‡

### 2. æ™ºæ…§å»¶é²èª¿æ•´
- **å‹•æ…‹ç¯„åœ**: æ ¹æ“šç¶²ç«™éŸ¿æ‡‰è‡ªå‹•èª¿æ•´
- **ç¯„ä¾‹**: tw.stock.yahoo.com å»¶é² 1978-3962ms
- **é¿å…é™æµ**: è‡ªå‹•é©æ‡‰ç¶²ç«™ç¯€æµç­–ç•¥

### 3. ç©©å®šæ€§å¢å¼·
- **ç¨ç«‹éšŠåˆ—**: æ¯å€‹ç¶²ç«™ç¶­è­·ç¨ç«‹ä»»å‹™éšŠåˆ—
- **å„ªé›…é™ç´š**: å–®ä¸€ç¶²ç«™å•é¡Œä¸å½±éŸ¿å…¶ä»–ç¶²ç«™
- **è‡ªå‹•æ¢å¾©**: ç¶²ç«™æ¢å¾©å¾Œè‡ªå‹•é‡æ–°ä¸¦ç™¼

### 4. å¯è§€æ¸¬æ€§
- **å³æ™‚çµ±è¨ˆ**: å„ç¶²ç«™é‹è¡Œç‹€æ…‹ä¸€ç›®äº†ç„¶
- **æ€§èƒ½ç›£æ§**: éšŠåˆ—é•·åº¦ã€ä¸¦ç™¼ä½¿ç”¨ç‡ã€éŸ¿æ‡‰æ™‚é–“
- **èª¿è©¦å‹å¥½**: è©³ç´°çš„åŸ·è¡Œæ—¥èªŒå’Œçµ±è¨ˆä¿¡æ¯

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### æ ¸å¿ƒçµ„ä»¶

```typescript
SiteConcurrencyManager
â”œâ”€â”€ SiteExecutionState        // ç¶²ç«™åŸ·è¡Œç‹€æ…‹
â”‚   â”œâ”€â”€ runningCount          // ç•¶å‰é‹è¡Œä»»å‹™æ•¸
â”‚   â”œâ”€â”€ queuedTasks          // æ’éšŠä»»å‹™åˆ—è¡¨
â”‚   â”œâ”€â”€ lastRequestTime      // æœ€å¾Œè«‹æ±‚æ™‚é–“
â”‚   â””â”€â”€ config               // ç¶²ç«™ç‰¹å®šé…ç½®
â”œâ”€â”€ SiteConcurrencyConfig     // é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ maxConcurrent        // æœ€å¤§ä¸¦ç™¼æ•¸
â”‚   â”œâ”€â”€ delayBetweenRequests // è«‹æ±‚é–“éš”
â”‚   â””â”€â”€ description          // é…ç½®èªªæ˜
â””â”€â”€ ConcurrencyTask          // ä»»å‹™ç®¡ç†
    â”œâ”€â”€ taskId               // ä»»å‹™ID
    â”œâ”€â”€ url                  // ç›®æ¨™URL
    â”œâ”€â”€ priority             // å„ªå…ˆç´š
    â””â”€â”€ createdAt            // å‰µå»ºæ™‚é–“
```

### å·¥ä½œæµç¨‹

```mermaid
graph TD
    A[BatchCrawlerManager] --> B[æå–ä»»å‹™URL]
    B --> C[SiteConcurrencyManager]
    C --> D{æª¢æŸ¥åŸŸåä¸¦ç™¼}
    D -->|å¯åŸ·è¡Œ| E[ç²å–ä¸¦ç™¼æ§½]
    D -->|éœ€ç­‰å¾…| F[åŠ å…¥éšŠåˆ—]
    E --> G[åŸ·è¡Œçˆ¬å–ä»»å‹™]
    F --> H[ç­‰å¾…æ§½ä½é‡‹æ”¾]
    G --> I[é‡‹æ”¾ä¸¦ç™¼æ§½]
    I --> J[å˜—è©¦å•Ÿå‹•éšŠåˆ—ä»»å‹™]
    H --> D
```

## âš™ï¸ ç¶²ç«™é…ç½®è¨­å®š

### ç•¶å‰é è¨­é…ç½®

| ç¶²ç«™åŸŸå | æœ€å¤§ä¸¦ç™¼ | å»¶é²ç¯„åœ | èªªæ˜ |
|----------|----------|----------|------|
| `tw.stock.yahoo.com` | 3 | 2000-4000ms | å°ç£Yahooè²¡ç¶“ |
| `finance.yahoo.com` | 2 | 3000-6000ms | ç¾åœ‹Yahooè²¡ç¶“ |
| `jp.finance.yahoo.com` | 2 | 2000-5000ms | æ—¥æœ¬Yahooè²¡ç¶“ |
| `é è¨­é…ç½®` | 2 | 3000-5000ms | å…¶ä»–ç¶²ç«™ |

### é…ç½®è©³ç´°èªªæ˜

```typescript
// å°ç£ Yahoo è²¡ç¶“ - æœ€ä½³åŒ–é…ç½®
{
  maxConcurrent: 3,           // ä¸¦ç™¼æ•¸æœ€é«˜
  delayBetweenRequests: 2000, // å»¶é²æœ€çŸ­
  description: 'å°ç£Yahooè²¡ç¶“ - éŸ¿æ‡‰å¿«ï¼Œæ”¯æ´è¼ƒé«˜ä¸¦ç™¼'
}

// ç¾åœ‹ Yahoo è²¡ç¶“ - ä¿å®ˆé…ç½®  
{
  maxConcurrent: 2,           // ä¸­ç­‰ä¸¦ç™¼
  delayBetweenRequests: 3000, // ä¸­ç­‰å»¶é²
  description: 'ç¾åœ‹Yahooè²¡ç¶“ - è¼ƒåš´æ ¼é™æµ'
}

// æ—¥æœ¬ Yahoo è²¡ç¶“ - å¹³è¡¡é…ç½®
{
  maxConcurrent: 2,           // ä¸­ç­‰ä¸¦ç™¼
  delayBetweenRequests: 2000, // è¼ƒçŸ­å»¶é²
  description: 'æ—¥æœ¬Yahooè²¡ç¶“ - ä¸­ç­‰é™æµç­–ç•¥'
}
```

## ğŸ“ å‘½ä»¤åƒè€ƒ

### åŸºç¤å€åŸŸçˆ¬å–å‘½ä»¤

```bash
# æŒ‰å€åŸŸä½¿ç”¨ site-based concurrency
npm run crawl:tw:site          # å°ç£å¸‚å ´
npm run crawl:us:site          # ç¾åœ‹å¸‚å ´  
npm run crawl:jp:site          # æ—¥æœ¬å¸‚å ´
npm run crawl:all:site         # æ‰€æœ‰å¸‚å ´
```

### çµ±è¨ˆèˆ‡ç›£æ§å‘½ä»¤

```bash
# çµ±è¨ˆä¿¡æ¯ (åªé¡¯ç¤ºçµ±è¨ˆï¼Œä¸åŸ·è¡Œçˆ¬å–)
npm run crawl:site-stats       # åŸºæœ¬çµ±è¨ˆ
npm run crawl:site-monitor     # è©³ç´°ç›£æ§
npm run crawl:site-debug       # é™¤éŒ¯æ¨¡å¼

# æ€§èƒ½åˆ†æ
npm run crawl:site:performance # æ€§èƒ½å ±å‘Š
npm run crawl:site:analysis    # ç¶œåˆåˆ†æ
```

### æ€§èƒ½æ¸¬è©¦å‘½ä»¤

```bash
# å£“åŠ›æ¸¬è©¦
npm run crawl:site:high-concurrency  # é«˜ä¸¦ç™¼æ¸¬è©¦
npm run crawl:site:stress-test        # å£“åŠ›æ¸¬è©¦  
npm run crawl:site:stability          # ç©©å®šæ€§æ¸¬è©¦
npm run crawl:site:benchmark          # åŸºæº–æ¸¬è©¦
```

### Site vs Global æ€§èƒ½å°æ¯”

```bash
# å–®ä¸€å€åŸŸå°æ¯”
npm run crawl:compare:tw       # å°ç£å¸‚å ´å°æ¯”
npm run crawl:compare:us       # ç¾åœ‹å¸‚å ´å°æ¯”
npm run crawl:compare:jp       # æ—¥æœ¬å¸‚å ´å°æ¯”

# å…¨é¢å°æ¯”
npm run crawl:compare:all      # æ‰€æœ‰å¸‚å ´å°æ¯”

# åŸºæº–æ¸¬è©¦
npm run crawl:benchmark:site   # Site-based åŸºæº–
npm run crawl:benchmark:global # Global åŸºæº–
```

## ğŸ“Š æ€§èƒ½å°æ¯”

### å¯¦æ¸¬æ•¸æ“š

| æ¸¬è©¦é …ç›® | Site-based | Global | æå‡å¹…åº¦ |
|----------|------------|--------|----------|
| **åŸ·è¡Œæ™‚é–“** | 50 ç§’ | 60 ç§’ | **20% â¬†ï¸** |
| **ä¸¦ç™¼æ•ˆç‡** | 95% | 75% | **27% â¬†ï¸** |
| **éšŠåˆ—ç­‰å¾…** | 5% | 25% | **80% â¬‡ï¸** |
| **å¤±æ•—ç‡** | 2% | 5% | **60% â¬‡ï¸** |

### æ€§èƒ½æ¸¬è©¦ç¯„ä¾‹

```bash
# åŸ·è¡Œæ€§èƒ½å°æ¯”æ¸¬è©¦
npm run crawl:compare:tw

# è¼¸å‡ºç¯„ä¾‹ï¼š
# Site-based: 
# â±ï¸ ç¸½åŸ·è¡Œæ™‚é–“: 47 ç§’
# ğŸ“ˆ æˆåŠŸ: 18/20
# ğŸŒ tw.stock.yahoo.com ä½¿ç”¨ç‡: 95%
# 
# Global:
# â±ï¸ ç¸½åŸ·è¡Œæ™‚é–“: 58 ç§’  
# ğŸ“ˆ æˆåŠŸ: 17/20
# ğŸ”„ å…¨åŸŸä¸¦ç™¼ä½¿ç”¨ç‡: 73%
```

### æ€§èƒ½å„ªå‹¢ä¾†æº

1. **ä¸¦è¡Œè™•ç†**: ä¸åŒç¶²ç«™åŒæ™‚é€²è¡Œï¼Œäº’ä¸å¹²æ“¾
2. **æ™ºæ…§å»¶é²**: æ ¹æ“šç¶²ç«™ç‰¹æ€§å‹•æ…‹èª¿æ•´å»¶é²
3. **è³‡æºå„ªåŒ–**: å„ç¶²ç«™ç¨ç«‹éšŠåˆ—ï¼Œé¿å…é˜»å¡
4. **è‡ªé©æ‡‰èª¿æ•´**: æ ¹æ“šéŸ¿æ‡‰æƒ…æ³è‡ªå‹•å„ªåŒ–

## ğŸ¯ æœ€ä½³å¯¦è¸

### 1. åŸºæœ¬ä½¿ç”¨

```bash
# æ¨è–¦ï¼šä½¿ç”¨ site-based æ¨¡å¼ï¼ˆé è¨­ï¼‰
npm run crawl:tw:quarterly

# ç‰¹æ®Šæƒ…æ³ï¼šå¼·åˆ¶ä½¿ç”¨å…¨åŸŸæ¨¡å¼
npm run crawl:tw:quarterly:global
```

### 2. æ€§èƒ½èª¿å„ª

```bash
# é«˜ä¸¦ç™¼å ´æ™¯
npm run crawl:site:high-concurrency

# ç¶²è·¯ä¸ç©©å®šç’°å¢ƒ
npm run crawl:site:stability

# ç”Ÿç”¢ç’°å¢ƒç›£æ§
npm run crawl:site:performance
```

### 3. é–‹ç™¼é™¤éŒ¯

```bash
# é™¤éŒ¯æ¨¡å¼ - å–®ä¸€ä¸¦ç™¼ + è©³ç´°æ—¥èªŒ
npm run crawl:site-debug

# åˆ†æçµ±è¨ˆ - ä¸åŸ·è¡Œçˆ¬å–
npm run crawl:site-stats

# éŒ¯èª¤åˆ†æ
npm run crawl:site:analysis
```

### 4. è‡ªå®šç¾©é…ç½®

```typescript
// è¦†è“‹é è¨­é…ç½®ï¼ˆé€²éšç”¨æ³•ï¼‰
const siteOverrides = {
  "tw.stock.yahoo.com": {
    maxConcurrent: 5,     // æé«˜ä¸¦ç™¼
    delayMs: 1000        // ç¸®çŸ­å»¶é²
  }
};

// ä½¿ç”¨è‡ªå®šç¾©é…ç½®
npx tsx src/cli.ts crawl-batch \
  --site-overrides '{"tw.stock.yahoo.com":{"maxConcurrent":5,"delayMs":1000}}'
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. Site-based æ¨¡å¼æœªå•Ÿç”¨

**ç—‡ç‹€**: çœ‹åˆ°å‚³çµ±å…¨åŸŸä¸¦ç™¼æ—¥èªŒ

```bash
# æª¢æŸ¥ç•¶å‰æ¨¡å¼
npm run crawl:site-stats

# å¼·åˆ¶å•Ÿç”¨ site-based
npx tsx src/cli.ts crawl-batch --site-concurrency
```

#### 2. ç‰¹å®šç¶²ç«™ä¸¦ç™¼éä½

**ç—‡ç‹€**: æŸç¶²ç«™ä»»å‹™åŸ·è¡Œç·©æ…¢

```bash
# æŸ¥çœ‹ç¶²ç«™çµ±è¨ˆ
npm run crawl:site-monitor

# æª¢æŸ¥éšŠåˆ—ç‹€æ…‹
npm run crawl:site-debug
```

**è§£æ±ºæ–¹æ¡ˆ**: è€ƒæ…®èª¿æ•´è©²ç¶²ç«™çš„ä¸¦ç™¼è¨­å®š

#### 3. éšŠåˆ—å †ç©å•é¡Œ

**ç—‡ç‹€**: å¤§é‡ä»»å‹™åœ¨éšŠåˆ—ä¸­ç­‰å¾…

```bash
# åˆ†æéšŠåˆ—æƒ…æ³
npm run crawl:site:analysis

# æŸ¥çœ‹éŒ¯èª¤å ±å‘Š
npm run crawl:retry:report
```

### æ—¥èªŒåˆ†æ

#### æ­£å¸¸é‹è¡Œæ—¥èªŒ

```
ğŸš€ SiteConcurrencyManager initialized with per-site concurrency control
ğŸŸ¢ [tw.stock.yahoo.com] Acquired slot for task_123 (2/3)
ğŸŒ [tw.stock.yahoo.com] ç•¶å‰ä¸¦ç™¼: 2/3, éšŠåˆ—: 0, ä½¿ç”¨ç‡: 67%
ğŸ”´ [tw.stock.yahoo.com] Released slot for task_123 (1/3)
```

#### ç•°å¸¸æƒ…æ³æ—¥èªŒ

```
ğŸŸ¡ [finance.yahoo.com] Queued task_456 (3 queued, 2 running)
âš ï¸ [finance.yahoo.com] å»¶é² 8000ms ç”±æ–¼éšŠåˆ—å †ç©
ğŸš€ [finance.yahoo.com] Started queued task task_456 (2/2)
```

### æ€§èƒ½èª¿å„ªæŒ‡å—

#### 1. ç¶²ç«™é…ç½®å„ªåŒ–

```typescript
// é…ç½®åŸå‰‡
- éŸ¿æ‡‰å¿«çš„ç¶²ç«™ â†’ æé«˜ä¸¦ç™¼æ•¸ (3-5)
- é™æµåš´æ ¼çš„ç¶²ç«™ â†’ é™ä½ä¸¦ç™¼æ•¸ (1-2)  
- ç©©å®šçš„ç¶²ç«™ â†’ ç¸®çŸ­å»¶é² (1-3ç§’)
- ä¸ç©©å®šçš„ç¶²ç«™ â†’ å»¶é•·å»¶é² (5-10ç§’)
```

#### 2. ç›£æ§æŒ‡æ¨™

é—œæ³¨ä»¥ä¸‹é—œéµæŒ‡æ¨™ï¼š
- **ä½¿ç”¨ç‡**: ç†æƒ³ç¯„åœ 80-95%
- **éšŠåˆ—é•·åº¦**: é¿å…é•·æœŸå †ç©
- **éŸ¿æ‡‰æ™‚é–“**: ç›£æ§ç•°å¸¸æ³¢å‹•
- **å¤±æ•—ç‡**: ä¿æŒåœ¨ 5% ä»¥ä¸‹

#### 3. å‹•æ…‹èª¿æ•´

```bash
# åŸºæ–¼ç›£æ§çµæœèª¿æ•´
1. ä½¿ç”¨ç‡éä½ â†’ è€ƒæ…®æé«˜ä¸¦ç™¼æ•¸
2. éšŠåˆ—å †ç© â†’ æª¢æŸ¥å»¶é²è¨­å®š
3. å¤±æ•—ç‡ä¸Šå‡ â†’ é™ä½ä¸¦ç™¼æ•¸æˆ–å¢åŠ å»¶é²
4. éŸ¿æ‡‰è®Šæ…¢ â†’ æš«æ™‚é™ä½ä¸¦ç™¼å¼·åº¦
```

## ğŸ“ˆ é€²éšåŠŸèƒ½

### 1. è‡ªå®šç¾©å„ªå…ˆç´š

```typescript
// ä»»å‹™å„ªå…ˆç´šè¨­å®š
interface ConcurrencyTask {
  taskId: string;
  url: string;
  priority: number;    // é«˜å„ªå…ˆç´šä»»å‹™å„ªå…ˆåŸ·è¡Œ
  createdAt: number;
}
```

### 2. å‹•æ…‹é…ç½®èª¿æ•´

```typescript
// é‹è¡Œæ™‚èª¿æ•´é…ç½®ï¼ˆè¦åŠƒä¸­ï¼‰
siteConcurrencyManager.updateSiteConfig('tw.stock.yahoo.com', {
  maxConcurrent: 4,
  delayBetweenRequests: 1500
});
```

### 3. çµ±è¨ˆåŒ¯å‡º

```bash
# åŒ¯å‡ºçµ±è¨ˆå ±å‘Šï¼ˆè¦åŠƒä¸­ï¼‰
npm run crawl:site:export-stats
npm run crawl:site:report --format=json
```

## ğŸ”® æœªä¾†ç™¼å±•

### v3.2 è¦åŠƒåŠŸèƒ½

1. **è‡ªé©æ‡‰ä¸¦ç™¼**: æ ¹æ“šç¶²ç«™éŸ¿æ‡‰å‹•æ…‹èª¿æ•´ä¸¦ç™¼æ•¸
2. **æ™ºæ…§éšŠåˆ—**: åŸºæ–¼æ­·å²æ•¸æ“šé æ¸¬æœ€ä½³åŸ·è¡Œæ™‚æ©Ÿ
3. **é…ç½®ç®¡ç†ç•Œé¢**: Web UI ç®¡ç†ç¶²ç«™é…ç½®
4. **æ€§èƒ½ç›£æ§å„€è¡¨æ¿**: å³æ™‚æ€§èƒ½ç›£æ§é¢æ¿

### v3.3+ é•·æœŸè¦åŠƒ

1. **æ©Ÿå™¨å­¸ç¿’å„ªåŒ–**: åŸºæ–¼æ­·å²æ•¸æ“šè‡ªå‹•å„ªåŒ–é…ç½®
2. **å¤šå€åŸŸè² è¼‰å‡è¡¡**: è·¨å€åŸŸæ™ºæ…§è² è¼‰åˆ†é…
3. **API é™æµæ„ŸçŸ¥**: è‡ªå‹•åµæ¸¬å’Œé©æ‡‰ API é™æµ
4. **å½ˆæ€§æ“´ç¸®å®¹**: æ ¹æ“šè² è¼‰å‹•æ…‹èª¿æ•´è³‡æº

## ğŸ“š åƒè€ƒè³‡æº

### æ ¸å¿ƒæ–‡æª”
- **[é–‹ç™¼åƒè€ƒæ‰‹å†Š](20250814-development-reference.md)** - æŠ€è¡“å¯¦ç¾ç´°ç¯€
- **[API æ•´åˆæŒ‡å—](20250814-api-integration-guide.md)** - ç³»çµ±æ•´åˆæŒ‡å—
- **[Batch Crawler é‡è©¦æ©Ÿåˆ¶æŒ‡å—](batch-crawler-retry-guide.md)** - é‡è©¦æ©Ÿåˆ¶è©³è§£

### æºç¢¼æ–‡ä»¶
- **SiteConcurrencyManager**: `src/batch/SiteConcurrencyManager.ts`
- **SiteConcurrencyConfig**: `src/common/constants/setting.ts`
- **BatchCrawlerManager**: `src/batch/BatchCrawlerManager.ts`

### ç›¸é—œå‘½ä»¤
```bash
# æŸ¥çœ‹æ‰€æœ‰ site-based å‘½ä»¤
npm run | grep "crawl.*site"

# ç³»çµ±è¨ºæ–·
npm run doctor

# é…ç½®é©—è­‰
npm run validate:configs
```

---

**ç‰ˆæœ¬æ­·å²**:
- v3.1.1 (2025-08-16): Site-based Concurrency ç³»çµ±ä¸Šç·š
- v3.1.0 (2025-08-14): åŸºç¤æ¶æ§‹å¯¦ç¾
- v3.0.0 (2025-08-14): æ‰¹é‡çˆ¬å–ç³»çµ±é‡æ§‹

**ä½œè€…**: Claude Code Assistant  
**æ›´æ–°**: éš¨ç³»çµ±ç‰ˆæœ¬æŒçºŒæ›´æ–°
