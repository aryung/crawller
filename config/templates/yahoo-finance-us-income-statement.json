{
  "templateType": "us-cashflow",
  "url": "https://finance.yahoo.com/quote/${stockCode}/cash-flow/",
  "_note": "This config extracts structured cash flow data from Yahoo Finance US cash flow page. Includes dynamic action to click 'Quarterly' button before data extraction. Note: Yahoo Finance US cash flow data is in thousands, will be converted to actual values by multiplying by 1000. Use with US stock codes like AAPL, MSFT, GOOGL, etc.",
  "actions": [
    {
      "type": "wait",
      "timeout": 5000,
      "description": "等待頁面初始載入"
    },
    {
      "type": "click", 
      "selector": "button[data-testid=\"QUARTERLY\"], button[data-testid=\"Quarterly\"], .Quarterly, button[aria-label*=\"Quarterly\"], [data-icon=\"quarterly\"]",
      "timeout": 3000,
      "description": "點擊 Quarterly 按鈕以取得季度現金流數據",
      "optional": true
    },
    {
      "type": "wait",
      "timeout": 8000,
      "description": "等待季度現金流數據完全載入"
    }
  ],
  "selectors": {
    "stockInfo": {
      "selector": "h1[data-reactid], h1, .D\\(ib\\).Fz\\(18px\\)",
      "transform": "cleanStockSymbol"
    },
    "period":{
      "selector": "div.table > div.tableHeader > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "totalRevenue": {
      "selector": "div.table > div.tableBody > div:nth-child(1) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractOperatingCashflow"
    },
    "costOfRevenue": {
      "selector": "div.table > div.tableBody > div:nth-child(2) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractInvestingCashflow"
    },
    "grossProfit": {
      "selector": "div.table > div.tableBody > div:nth-child(3) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFinancingCashflow"
    },
    "operatingExpense": {
      "selector": "div.table > div.tableBody > div:nth-child(4) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFinancingCashflow"
    },
    "operatingIncome":{
      "selector": "div.table > div.tableBody > div:nth-child(5) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "netNonOperatingInterestIncome":{
      "selector": "div.table > div.tableBody > div:nth-child(6) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "otherIncomeExpense":{
      "selector": "div.table > div.tableBody > div:nth-child(7) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "pretaxIncome":{
      "selector": "div.table > div.tableBody > div:nth-child(8) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "TaxProvision":{
      "selector": "div.table > div.tableBody > div:nth-child(9) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "netIncomeCommonStockholder":{
      "selector": "div.table > div.tableBody > div:nth-child(10) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "dilutedNIAvailableToComStock":{
      "selector": "div.table > div.tableBody > div:nth-child(11) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "basicEps":{
      "selector": "div.table > div.tableBody > div:nth-child(12) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "dilutedEps":{
      "selector": "div.table > div.tableBody > div:nth-child(12) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "basicAverageShares":{
      "selector": "div.table > div.tableBody > div:nth-child(13) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "dilutedAverageShares":{
      "selector": "div.table > div.tableBody > div:nth-child(14) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "totalOperatingIncome":{
      "selector": "div.table > div.tableBody > div:nth-child(15) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "totalExpense":{
      "selector": "div.table > div.tableBody > div:nth-child(16) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "netIncomeFromContinuingAndDiscontinuedOperation":{
      "selector": "div.table > div.tableBody > div:nth-child(17) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "normalizedEBITDA":{
      "selector": "div.table > div.tableBody > div:nth-child(18) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "taxRateForCalcs":{
      "selector": "div.table > div.tableBody > div:nth-child(19) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "taxEffectOfUnusualItems":{
      "selector": "div.table > div.tableBody > div:nth-child(20) > div > div:nth-child(n+2)",
      "multiple": false,
      "transform": "extractFreeCashflow"
    },
    "data": {
      "selector"": "body",
      "transform"": "extractTableData",
    }

  },
  "headers": {
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
    "Accept-Language": "en-US,en;q=0.9",
    "Accept-Encoding": "gzip, deflate, br",
    "Cache-Control": "no-cache",
    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
  },
  "options": {
    "timeout": 30000,
    "retries": 2,
    "headless": true,
    "screenshot": false,
    "encoding": "utf-8",
    "domainDelay": 8000,
    "waitFor": 5000,
    "viewport": {
      "width": 1920,
      "height": 1080
    }
  },
  "variables": {
    "stockCode": "AAPL",
    "baseUrl": "https://finance.yahoo.com"
  },
  "export": {
    "formats": ["json", "csv"],
    "filename": "yahoo_finance_us_cashflow_${stockCode}"
  }
}
